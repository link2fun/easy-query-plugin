package ${aptFileCompiler.getPackageName()};

import com.easy.query.core.expression.parser.core.available.TableAvailable;
import com.easy.query.core.proxy.AbstractProxyEntity;
import com.easy.query.core.proxy.SQLColumn;
import com.easy.query.core.proxy.AbstractSelector;
#foreach($imp in ${aptFileCompiler.getImports()})
${imp}    
#end

/**
 * this file automatically generated by easy-query, don't modify it
 *
 * @author xuejiaming
 */
public class ${aptFileCompiler.getEntityClassProxyName()} extends AbstractProxyEntity<${aptFileCompiler.getEntityClassProxyName()}, ${aptFileCompiler.getEntityClassName()}>{

#macro(renderPropertyUI $valueObject)
#foreach($property in $valueObject.getProperties())
    ${property.comment}
    * {@link ${property.getOwner()}#${property.propertyName}}
    */
    #if(${property.isValueObject()})
    public ${property.getEntityName()}Proxy ${property.getPropertyName()}(){
        return getValueObject(new ${property.getEntityName()}Proxy(getTable(), getValueProperty("${property.getPropertyName()}")));
    }
    #else
    public SQLColumn<${aptFileCompiler.getEntityClassProxyName()},${property.getPropertyType()}> ${property.getPropertyName()}(){
        return get("${property.getPropertyName()}");
    }
    #end

#end
#end
    private static final Class<${aptFileCompiler.getEntityClassName()}> entityClass = ${aptFileCompiler.getEntityClassName()}.class;

    public static ${aptFileCompiler.getEntityClassProxyName()} createTable() {
        return new ${aptFileCompiler.getEntityClassProxyName()}();
    }

    public ${aptFileCompiler.getEntityClassProxyName()}() {
    }

    #renderPropertyUI($aptValueObjectInfo)

    @Override
    public Class<${aptFileCompiler.getEntityClassName()}> getEntityClass() {
        return entityClass;
    }
#macro(renderValueObjectUI $valueObjectParent)
#foreach($valueObject in $valueObjectParent.getChildren())

    public static class ${valueObject.getEntityName()}Proxy extends AbstractValueObjectProxyEntity<${aptFileCompiler.getEntityClassProxyName()}, ${valueObject.getEntityName()}> {

        private ${valueObject.getEntityName()}Proxy(TableAvailable table, String propertyName) {
            super(table, propertyName);
        }

        #renderPropertyUI($valueObject)

        #renderValueObjectUI($valueObject)
    }
#end
#end

    #renderValueObjectUI($aptValueObjectInfo)


    /**
    * 数据库列的简单获取
    * @return
    */
    public ${aptFileCompiler.getSelectorInfo().getName()} cols() {
        return new ${aptFileCompiler.getSelectorInfo().getName()}(this);
    }

public static class ${aptFileCompiler.getSelectorInfo().getName()} extends AbstractSelector<${aptFileCompiler.getEntityClassProxyName()}, ${aptFileCompiler.getEntityClassName()}, ${aptFileCompiler.getSelectorInfo().getName()}> {

    public ${aptFileCompiler.getSelectorInfo().getName()}(${aptFileCompiler.getEntityClassProxyName()} proxy) {
        super(proxy);
    }


#foreach($property in ${aptFileCompiler.getSelectorInfo().getProperties()})
    ${property.getComment()}
        * {@link ${aptFileCompiler.getEntityClassName()}#${property.getPropertyName()}}
        */
    public ${aptFileCompiler.getSelectorInfo().getName()} ${property.getPropertyName()}() {
        return add(getProxy().${property.getPropertyName()}());
        }

#end
}

}
